# 落地方案快速测试指南

## 功能测试清单

### 一、价格筛选模块测试

#### 测试场景 1：快捷预算按钮
1. 打开 MacPicker，看到左侧筛选面板
2. 在"价格范围"下找到快捷按钮（6k-8k、8k-12k、12k+）
3. 点击"8k-12k"按钮
   - ✓ 价格标签立即显示 "¥8,000 – ¥12,000"
   - ✓ 滑块自动移动到对应位置
   - ✓ 右侧产品列表实时更新（仅显示符合范围的 Mac）

#### 测试场景 2：容错设计
1. 在"最高"输入框输入 "8000"，在"最低"输入框输入 "12000"
2. 点击"最低"或"最高"输入框外（失焦）
   - ✓ 数值自动交换（变成 min=8000, max=12000）
   - ✓ 显示红色提示："已为您调整价格顺序"
   - ✓ 2 秒后提示自动消失

#### 测试场景 3：无效输入
1. 在"最低"输入框输入 "abc"
2. 点击外面（失焦）
   - ✓ 输入框边框变红
   - ✓ 显示提示："请输入有效数字"

#### 测试场景 4：滑块拖动
1. 拖动左滑块从 5999 到 8000
   - ✓ 价格标签实时显示当前值
   - ✓ PC 端 300ms 内产品列表自动更新（无需点"应用"）

---

### 二、全局搜索下拉测试

#### 测试场景 1：输入触发提示
1. 在顶部搜索框输入 "M"
   - ✓ 下方立即出现下拉列表
   - ✓ 显示所有包含"M"的候选项（M1、M2、MacBook 等）
   - ✓ 最多显示 8 条结果

#### 测试场景 2：模糊匹配
1. 输入 "air"
   - ✓ 显示 "MacBook Air" 相关机型
2. 输入 "13"
   - ✓ 显示所有 13 寸机型

#### 测试场景 3：清空按钮
1. 在搜索框输入内容
   - ✓ 右侧出现"×"按钮
2. 点击"×"按钮
   - ✓ 搜索框内容清空
   - ✓ 下拉列表关闭
   - ✓ 产品列表恢复到之前的筛选结果

#### 测试场景 4：键盘导航
1. 输入 "M"，看到下拉列表
2. 按"↓"键
   - ✓ 第一项高亮
3. 按"↓"键
   - ✓ 移到第二项
4. 按"Enter"键
   - ✓ 选中该项，搜索框显示该项内容
   - ✓ 下拉列表关闭，产品列表更新

#### 测试场景 5：关闭下拉
1. 在搜索框输入内容，看到下拉
2. 点击下拉外的地方
   - ✓ 下拉立即关闭
3. 按"Esc"键
   - ✓ 下拉关闭

---

### 三、已选条件标签测试

#### 测试场景 1：标签显示
1. 设置：价格 8000-12000、RAM 16GB、SSD 512GB
   - ✓ 搜索框下方出现 4 个灰色标签
   - ✓ 标签显示："¥8,000 起"、"最高 ¥12,000"、"≥ 16GB RAM"、"≥ 512GB SSD"
   - ✓ 每个标签右侧有"×"按钮

#### 测试场景 2：删除单个标签
1. 点击"≥ 16GB RAM"标签的"×"
   - ✓ RAM 筛选立即取消
   - ✓ 该标签消失
   - ✓ 产品列表实时更新（包含 8GB RAM 的机型也出现了）

#### 测试场景 3：标签动画
1. 添加任何筛选条件
   - ✓ 标签以 slideInUp 动画出现（平滑进入，不生硬）

---

### 四、实时反馈测试

#### PC 端测试
1. 左侧筛选面板，调整任何参数（价格、RAM、SSD）
   - ✓ 右侧产品列表在 300ms 内自动更新
   - ✓ 无需点击"应用筛选"按钮
   - ✓ 流畅，没有卡顿

#### 移动端测试
1. 点击顶部菜单按钮，打开筛选抽屉
2. 调整价格/RAM/SSD
   - ✓ 筛选面板内实时显示更新
3. 点击"应用筛选"按钮
   - ✓ 抽屉自动关闭
   - ✓ 主页面产品列表更新
   - ✓ 顶部已选条件标签显示（如果有活跃筛选）

---

### 五、综合流程测试（真实用户场景）

#### 场景：用户找 8-12k 的 M1 MacBook Air

**步骤 1：锁预算**
1. 点击快捷按钮"8k-12k"
   - ✓ 价格标签显示 ¥8,000 – ¥12,000
   - ✓ 产品列表实时更新

**步骤 2：定核心配置**
1. 选择 RAM ≥ 8GB（默认）
2. 选择 SSD ≥ 256GB（默认）
   - ✓ 已选标签栏可能为空（因为都是默认值）

**步骤 3：精准找机型**
1. 在搜索框输入 "air"
   - ✓ 下拉显示 MacBook Air 相关结果
2. 点击"MacBook Air M1"
   - ✓ 搜索框显示该内容
   - ✓ 产品列表过滤到符合所有条件的 Air M1 机型

**结果验证**
- ✓ 最终显示的所有机型都符合："8k-12k 价格" + "M1 芯片" + "Air 系列"
- ✓ 整个过程 < 2 秒，流畅无卡顿

---

## 边界条件测试

### 极端情况 1：数据为空
- 如果没有符合筛选条件的产品
  - ✓ 显示 "没有匹配到机器" 提示
  - ✓ 建议用户"降低 RAM/SSD 要求，或者清空搜索关键字"

### 极端情况 2：输入极端价格
1. 输入 min=50000, max=1000
   - ✓ 自动交换为 min=1000, max=50000
   - ✓ 显示提示

### 极端情况 3：非常长的搜索关键字
1. 输入 "MacBook Pro 16-inch M2 Max 32GB 1TB Deep Space Gray"
   - ✓ 搜索仍能匹配相关产品
   - ✓ 下拉不卡顿

### 极端情况 4：快速连续操作
1. 快速拖动滑块、输入价格、点击快捷按钮
   - ✓ 系统不崩溃
   - ✓ 300ms debounce 防止过度渲染

---

## 视觉验证

### 移动端 (< 700px)
- [ ] 菜单按钮在右上角
- [ ] 搜索框占满宽度
- [ ] 筛选抽屉从右侧滑入
- [ ] 标签栏显示在搜索框下
- [ ] 卡片网格 1-2 列显示

### PC 端 (≥ 700px)
- [ ] 左侧筛选面板固定宽度 320px
- [ ] 搜索框在右上角，宽度自适应
- [ ] 右侧产品网格自动排列
- [ ] 标签栏显示在搜索框下方
- [ ] 整体布局对称平衡

---

## 性能监控

在浏览器开发者工具中验证：

### Network（网络）
- 初始加载 macs.json < 2s

### Performance（性能）
1. 拖动价格滑块 10 次
   - FPS 保持 > 50
   - 无红色"长任务"警告

2. 输入搜索关键字并快速删除 5 次
   - 下拉列表渲染流畅
   - CPU 占用 < 10%

### Console（控制台）
- ✓ 无 JavaScript 错误
- ✓ 无 React 警告（如重复 key）
- ✓ 无性能警告

---

## 部署前检查

在生产环境部署前：

- [ ] 所有功能测试都通过
- [ ] 没有 JavaScript 错误
- [ ] PC 和移动端都正常
- [ ] 在低端设备上测试（性能不下降）
- [ ] 国际化（如有支持）验证
- [ ] 链接和外部资源都能正常加载

---

## 常见问题排查

### Q1：标签栏不显示？
- A：检查 filters 中对应的条件值是否超过默认值（RAM > 8, SSD > 256 等）

### Q2：搜索下拉一直不出现？
- A：确保 products 数组不为空，且输入长度 > 0

### Q3：PC 端产品列表没有实时更新？
- A：检查浏览器宽度是否 > 700px（移动端不启用自动同步）

### Q4：移动端抽屉卡住了？
- A：点击"应用筛选"按钮或背景区域应该能关闭

---

## 本地测试命令

```bash
# 安装依赖
npm install

# 开发模式运行
npm run dev

# 访问
open http://localhost:3000
```

---

**测试完成后，可以自信地推送到生产环境！** ✓
